var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactDom = require('react-dom');

var _reactRedux = require('react-redux');

var _MainChat = require('./components/MainChat');

var _MainChat2 = _interopRequireDefault(_MainChat);

var _ConfigureStore = require('./store/ConfigureStore');

var _ConfigureStore2 = _interopRequireDefault(_ConfigureStore);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var store = (0, _ConfigureStore2.default)();

(0, _reactDom.render)(_react2.default.createElement(
  _reactRedux.Provider,
  { store: store },
  _react2.default.createElement(_MainChat2.default, null)
), document.getElementById('mainChatContainer'));
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getUsers = getUsers;

var _User = require('../constants/User');

var _axios = require('axios');

var _axios2 = _interopRequireDefault(_axios);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function getUsers() {
    return function (dispatch) {

        dispatch({
            type: _User.GETCURRENTUSER_REQUESTED
        });

        _axios2.default.get('./Chat/GetUsers/').then(function (response) {
            var users = response.data;
            dispatch({
                type: _User.GETCURRENTUSER_SUCCESS,
                payload: users
            });
        }).catch(function (error) {
            dispatch({
                type: _User.GETCURRENTUSER_FAIL,
                errors: new Error('Ошибка при загрузке пользователей')
            });
        });
    };
}
var ChatItemToMe = React.createClass({
    displayName: 'ChatItemToMe',


    render: function render() {
        var messageDate = this.props.datetime;
        var messageAuthor = this.props.username;

        return React.createElement(
            'li',
            { className: 'clearfix' },
            React.createElement(
                'div',
                { className: 'message-data' },
                React.createElement(
                    'span',
                    { className: 'message-data-name' },
                    React.createElement('i', { className: 'fa fa-circle online' }),
                    messageAuthor
                ),
                ' \xA0 \xA0',
                React.createElement(
                    'span',
                    { className: 'message-data-time' },
                    messageDate
                )
            ),
            React.createElement(
                'div',
                { className: 'message my-message' },
                this.props.text
            )
        );
    }

});
var ChatItemToOther = React.createClass({
    displayName: 'ChatItemToOther',


    render: function render() {
        var messageDate = this.props.datetime;

        return React.createElement(
            'li',
            { className: 'clearfix' },
            React.createElement(
                'div',
                { className: 'message-data align-right' },
                React.createElement(
                    'span',
                    { className: 'message-data-time' },
                    messageDate
                ),
                ' \xA0 \xA0',
                React.createElement('span', { className: 'message-data-name' }),
                ' ',
                React.createElement('i', { className: 'fa fa-circle me' })
            ),
            React.createElement(
                'div',
                { className: 'message other-message float-right' },
                this.props.text
            )
        );
    }

});
var ChatUser = React.createClass({
    displayName: 'ChatUser',


    getInitialState: function getInitialState() {
        return {
            UserId: this.props.userId,
            UserName: this.props.username,
            ChatHub: this.props.chathub,
            CurrentUser: this.props.currentUser,
            CurrentUserName: this.props.currentUserName
        };
    },

    componentDidMount: function componentDidMount() {},

    addMessageWindow: function addMessageWindow() {
        var chatWindow = document.getElementById(this.state.UserId);
        if (chatWindow == null) {
            var windowContainer = document.getElementById('chatWindowDiv');
            ReactDOM.render(React.createElement(ChatWindow, { username: this.state.UserName,
                userid: this.state.UserId,
                sendmessage: this.state.SendMessage,
                chathub: this.state.ChatHub,
                currentUser: this.state.CurrentUser,
                currentUserName: this.state.CurrentUserName }), windowContainer);
        } else {
            if ($(chatWindow).css('display') === 'none') {
                $(chatWindow).css('display', 'block');
            } else {
                $(chatWindow).css('display', 'none');
            }
        }
    },

    render: function render() {
        return React.createElement(
            'li',
            { key: $.guid++, className: 'clearfix' },
            React.createElement(
                'div',
                { onClick: this.addMessageWindow, id: 'userSelector' + this.state.UserId },
                React.createElement('img', { src: "https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_01.jpg", alt: 'avatar' }),
                React.createElement(
                    'div',
                    { className: "about" },
                    React.createElement(
                        'div',
                        { className: "name" },
                        this.state.UserName
                    ),
                    React.createElement(
                        'div',
                        { className: "status" },
                        React.createElement('i', { className: "fa fa-circle online" }),
                        'online'
                    )
                )
            )
        );
    }

});
var ChatUsers = React.createClass({
    displayName: "ChatUsers",


    getInitialState: function getInitialState() {
        return {
            ChatHub: this.props.chathub,
            Users: this.props.users,
            CurrentUserId: "",
            CurrentUserName: ""
        };
    },

    pushUserList: function pushUserList() {},

    componentWillMount: function componentWillMount() {
        this.state.ChatHub.client.pushUserList = this.pushUserList;
        /*var component = this;
        $.ajax({
            type: 'GET',
            url: './Chat/GetUsers/',
            dataType: 'json',
            success: function (data) {
                var users = JSON.parse(data);
                $.ajax({
                    type: 'GET',
                    url: './Chat/GetCurrentUser/',
                    dataType: 'json',
                    success: function (currentUserData) {
                        var currentUserName = currentUserData.UserName;
                        var currentUserId = currentUserData.Id;
                        component.setState({
                            Users: users,
                            CurrentUserName: currentUserName,
                            CurrentUserId: currentUserId
                        });
                    },
                    data: {},
                    async: true
                });
            },
            data: {},
            async: true
        });*/
    },

    componentDidUpdate: function componentDidUpdate(prevProps, prevState) {
        var userSelector = $(ReactDOM.findDOMNode(this)).find("div[id^=userSelector]")[0];
        if (userSelector != undefined) {
            userSelector.click();
        }
    },

    componentDidMount: function componentDidMount() {},

    render: function render() {
        var userLi = [];
        var i = 0;

        for (; i < this.state.Users.length; i++) {
            var user = this.state.Users[i];
            userLi.push(React.createElement(ChatUser, { key: i, username: user.UserName, userId: user.UserId, currentUser: this.state.CurrentUserId, currentUserName: this.state.CurrentUserName, chathub: this.state.ChatHub }));
        }

        return React.createElement(
            "div",
            { className: 'people-list', id: 'people-list' },
            React.createElement(
                "div",
                { className: 'search' },
                React.createElement("input", { type: 'text', placeholder: 'search' }),
                React.createElement("i", { className: 'fa fa-search' })
            ),
            React.createElement(
                "ul",
                { className: "list" },
                userLi
            )
        );
    }

});
var ChatWindow = React.createClass({
    displayName: 'ChatWindow',


    getInitialState: function getInitialState() {
        return {
            UserId: this.props.userid,
            UserName: this.props.username,
            ChatHub: this.props.chathub,
            Messages: [],
            CurrentUserId: this.props.currentUser,
            CurrentUserName: this.props.currentUserName
        };
    },

    pushNewMessage: function pushNewMessage(id, authorId, authorName, message, dateTime) {
        var messages = this.state.Messages;
        messages.push({
            Id: id,
            AuthorId: authorId,
            AuthorName: authorName,
            Message: message,
            DateTime: dateTime
        });
        this.setState({
            Messages: messages
        });
    },

    componentWillMount: function componentWillMount() {
        this.state.ChatHub.client.pushNewMessage = this.pushNewMessage;
        $.connection.hub.start();
    },

    componentWillUpdate: function componentWillUpdate() {
        $.connection.hub.start();
    },

    onPressEnter: function onPressEnter(e) {
        var code = e.keyCode || e.which;
        if (code === 13) {
            this.sendMessage();
        }
    },

    createGuid: function createGuid() {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
            var r = Math.random() * 16 | 0,
                v = c === 'x' ? r : r & 0x3 | 0x8;
            return v.toString(16);
        });
    },

    sendMessage: function sendMessage() {
        var messageInput = document.getElementById('message-to-send' + this.state.UserId);
        var message = messageInput.value;
        if (message !== "") {
            var messageObj = {
                Id: this.createGuid(),
                ReceiverId: this.state.UserId,
                ReceiverName: this.state.UserName,
                AuthorId: this.state.CurrentUserId,
                AuthorName: this.state.CurrentUserName,
                Message: message,
                DateTime: new Date()
            };
            $.ajax({
                method: 'POST',
                url: './Chat/PostChat',
                data: JSON.stringify(messageObj),
                dataType: "json",
                contentType: "application/json; charset=utf-8"
            });
            var elem = $('#message-to-send' + this.state.UserId);
            elem.blur();
            elem.val("");
            setTimeout(function () {
                elem.focus();
            }, 0);
        }
    },

    componentDidUpdate: function componentDidUpdate() {
        var $messageInput = $(ReactDOM.findDOMNode(this)).find('div[data-messages]');
        if ($messageInput.length) {
            $messageInput[0].scrollTop = $messageInput[0].scrollHeight;
        }
    },

    render: function render() {
        var items = [];
        var i = 0;
        var userId;
        if (this.state.Messages.length) {
            for (; i < this.state.Messages.length; i++) {
                userId = this.state.Messages[i].AuthorId;
                var date = dateFormat(new Date(this.state.Messages[i].DateTime), 'h:MM:ss TT, mmmm dS');
                if (userId !== this.state.CurrentUserId) {
                    items.push(React.createElement(ChatItemToMe, {
                        username: this.state.Messages[i].AuthorName,
                        datetime: date,
                        text: this.state.Messages[i].Message, key: i
                    }));
                } else {
                    items.push(React.createElement(ChatItemToOther, {
                        datetime: date,
                        text: this.state.Messages[i].Message, key: i
                    }));
                }
            }
        }

        return React.createElement(
            'div',
            { className: 'chat-userContainer', id: this.props.userid },
            React.createElement(
                'div',
                { className: "chat-header clearfix" },
                React.createElement('img', { src: "https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_01_green.jpg", alt: "avatar" }),
                React.createElement(
                    'div',
                    { className: "chat-about" },
                    React.createElement(
                        'div',
                        { className: "chat-with" },
                        'Chat with ',
                        this.state.UserName
                    ),
                    React.createElement(
                        'div',
                        { className: "chat-num-messages" },
                        'already 1 902 messages'
                    )
                ),
                React.createElement('i', { className: "fa fa-star" })
            ),
            React.createElement(
                'div',
                { ref: 'chatHistory', className: "chat-history" },
                React.createElement(
                    'ul',
                    null,
                    ' ',
                    items,
                    ' '
                )
            ),
            React.createElement(
                'div',
                { className: "chat-message clearfix" },
                React.createElement('textarea', { onKeyPress: this.onPressEnter, name: "message-to-send", id: "message-to-send" + this.state.UserId, placeholder: "Type your message", rows: "3" }),
                React.createElement('i', { className: "fa fa-file-o" }),
                ' \xA0\xA0\xA0',
                React.createElement('i', { className: "fa fa-file-image-o" }),
                React.createElement(
                    'button',
                    { onClick: this.sendMessage },
                    'Send'
                )
            )
        );
    }

});
Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _redux = require('redux');

var _reactRedux = require('react-redux');

var _ChatUsers = require('ChatUsers');

var _ChatUsers2 = _interopRequireDefault(_ChatUsers);

var _UserActions = require('../actions/UserActions');

var UserActions = _interopRequireWildcard(_UserActions);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var MainChat = function (_Component) {
    _inherits(MainChat, _Component);

    function MainChat(props) {
        _classCallCheck(this, MainChat);

        var _this = _possibleConstructorReturn(this, (MainChat.__proto__ || Object.getPrototypeOf(MainChat)).call(this, props));

        _this.state = {
            ChatHub: $.connection.MainHub,
            Users: Users
        };
        return _this;
    }

    _createClass(MainChat, [{
        key: 'componentDidMount',
        value: function componentDidMount() {
            var getUsers = this.props.UserActions.getUsers;

            getUsers();
            this.setState({
                kind: data.kind,
                data: data.data.children
            });
        }
    }, {
        key: 'render',
        value: function render() {
            var _props = this.props,
                loading = _props.loading,
                users = _props.users,
                errors = _props.errors;


            if (loading) {
                return _react2.default.createElement(
                    'div',
                    null,
                    'Loading'
                );
            }
            if (errors != null) {
                return _react2.default.createElement(
                    'div',
                    null,
                    'Error!'
                );
            }
            return _react2.default.createElement(_ChatUsers2.default, { users: users, chathub: this.state.ChatHub });
        }
    }]);

    return MainChat;
}(_react.Component);

function mapStateToProps(state) {
    return {
        users: state.users
    };
}

function mapDispatchToProps(dispatch) {
    return {
        userActions: (0, _redux.bindActionCreators)(UserActions, dispatch)
    };
}

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(MainChat);
Object.defineProperty(exports, "__esModule", {
  value: true
});
var GETCURRENTUSER_REQUEST = exports.GETCURRENTUSER_REQUEST = 'GETCURRENTUSER_REQUEST';
var GETCURRENTUSER_SUCCESS = exports.GETCURRENTUSER_SUCCESS = 'GETCURRENTUSER_SUCCESS';
var GETCURRENTUSER_FAIL = exports.GETCURRENTUSER_FAIL = 'GETCURRENTUSER_FAIL';
Object.defineProperty(exports, "__esModule", {
    value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

exports.default = info;

var _User = require('../constants/User');

var defaultState = { loading: false, info: null, errors: null };

function info() {
    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultState;
    var action = arguments[1];

    switch (action.type) {

        case _User.GETCURRENTUSER_REQUESTED:
            return _extends({}, state, { loading: true });

        case _User.GETCURRENTUSER_SUCCESS:
            return _extends({}, state, { loading: false, info: action.payload, errors: null });

        case _User.GETCURRENTUSER_FAIL:
            return _extends({}, state, { loading: false, info: null, errors: action.errors });

        default:
            return state;
    }
}
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = configureStore;

var _redux = require('redux');

var _reducers = require('../reducers');

var _reducers2 = _interopRequireDefault(_reducers);

var _reduxLogger = require('redux-logger');

var _reduxLogger2 = _interopRequireDefault(_reduxLogger);

var _reduxThunk = require('redux-thunk');

var _reduxThunk2 = _interopRequireDefault(_reduxThunk);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function configureStore(initialState) {
    var logger = (0, _reduxLogger2.default)();
    var store = (0, _redux.createStore)(_reducers2.default, initialState, (0, _redux.applyMiddleware)(_reduxThunk2.default, logger));

    if (module.hot) {
        module.hot.accept('../reducers', function () {
            var nextRootReducer = require('../reducers');
            store.replaceReducer(nextRootReducer);
        });
    }

    return store;
}
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

/*
 * Date Format 1.2.3
 * (c) 2007-2009 Steven Levithan <stevenlevithan.com>
 * MIT license
 *
 * Includes enhancements by Scott Trenda <scott.trenda.net>
 * and Kris Kowal <cixar.com/~kris.kowal/>
 *
 * Accepts a date, a mask, or a date and a mask.
 * Returns a formatted version of the given date.
 * The date defaults to the current date/time.
 * The mask defaults to dateFormat.masks.default.
 */

(function (global) {
  'use strict';

  var dateFormat = function () {
    var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g;
    var timezone = /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g;
    var timezoneClip = /[^-+\dA-Z]/g;

    // Regexes and supporting functions are cached through closure
    return function (date, mask, utc, gmt) {

      // You can't provide utc if you skip other args (use the 'UTC:' mask prefix)
      if (arguments.length === 1 && kindOf(date) === 'string' && !/\d/.test(date)) {
        mask = date;
        date = undefined;
      }

      date = date || new Date();

      if (!(date instanceof Date)) {
        date = new Date(date);
      }

      if (isNaN(date)) {
        throw TypeError('Invalid date');
      }

      mask = String(dateFormat.masks[mask] || mask || dateFormat.masks['default']);

      // Allow setting the utc/gmt argument via the mask
      var maskSlice = mask.slice(0, 4);
      if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {
        mask = mask.slice(4);
        utc = true;
        if (maskSlice === 'GMT:') {
          gmt = true;
        }
      }

      var _ = utc ? 'getUTC' : 'get';
      var d = date[_ + 'Date']();
      var D = date[_ + 'Day']();
      var m = date[_ + 'Month']();
      var y = date[_ + 'FullYear']();
      var H = date[_ + 'Hours']();
      var M = date[_ + 'Minutes']();
      var s = date[_ + 'Seconds']();
      var L = date[_ + 'Milliseconds']();
      var o = utc ? 0 : date.getTimezoneOffset();
      var W = getWeek(date);
      var N = getDayOfWeek(date);
      var flags = {
        d: d,
        dd: pad(d),
        ddd: dateFormat.i18n.dayNames[D],
        dddd: dateFormat.i18n.dayNames[D + 7],
        m: m + 1,
        mm: pad(m + 1),
        mmm: dateFormat.i18n.monthNames[m],
        mmmm: dateFormat.i18n.monthNames[m + 12],
        yy: String(y).slice(2),
        yyyy: y,
        h: H % 12 || 12,
        hh: pad(H % 12 || 12),
        H: H,
        HH: pad(H),
        M: M,
        MM: pad(M),
        s: s,
        ss: pad(s),
        l: pad(L, 3),
        L: pad(Math.round(L / 10)),
        t: H < 12 ? 'a' : 'p',
        tt: H < 12 ? 'am' : 'pm',
        T: H < 12 ? 'A' : 'P',
        TT: H < 12 ? 'AM' : 'PM',
        Z: gmt ? 'GMT' : utc ? 'UTC' : (String(date).match(timezone) || ['']).pop().replace(timezoneClip, ''),
        o: (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),
        S: ['th', 'st', 'nd', 'rd'][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10],
        W: W,
        N: N
      };

      return mask.replace(token, function (match) {
        if (match in flags) {
          return flags[match];
        }
        return match.slice(1, match.length - 1);
      });
    };
  }();

  dateFormat.masks = {
    'default': 'ddd mmm dd yyyy HH:MM:ss',
    'shortDate': 'm/d/yy',
    'mediumDate': 'mmm d, yyyy',
    'longDate': 'mmmm d, yyyy',
    'fullDate': 'dddd, mmmm d, yyyy',
    'shortTime': 'h:MM TT',
    'mediumTime': 'h:MM:ss TT',
    'longTime': 'h:MM:ss TT Z',
    'isoDate': 'yyyy-mm-dd',
    'isoTime': 'HH:MM:ss',
    'isoDateTime': 'yyyy-mm-dd\'T\'HH:MM:sso',
    'isoUtcDateTime': 'UTC:yyyy-mm-dd\'T\'HH:MM:ss\'Z\'',
    'expiresHeaderFormat': 'ddd, dd mmm yyyy HH:MM:ss Z'
  };

  // Internationalization strings
  dateFormat.i18n = {
    dayNames: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
    monthNames: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec', 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']
  };

  function pad(val, len) {
    val = String(val);
    len = len || 2;
    while (val.length < len) {
      val = '0' + val;
    }
    return val;
  }

  /**
   * Get the ISO 8601 week number
   * Based on comments from
   * http://techblog.procurios.nl/k/n618/news/view/33796/14863/Calculate-ISO-8601-week-and-year-in-javascript.html
   *
   * @param  {Object} `date`
   * @return {Number}
   */
  function getWeek(date) {
    // Remove time components of date
    var targetThursday = new Date(date.getFullYear(), date.getMonth(), date.getDate());

    // Change date to Thursday same week
    targetThursday.setDate(targetThursday.getDate() - (targetThursday.getDay() + 6) % 7 + 3);

    // Take January 4th as it is always in week 1 (see ISO 8601)
    var firstThursday = new Date(targetThursday.getFullYear(), 0, 4);

    // Change date to Thursday same week
    firstThursday.setDate(firstThursday.getDate() - (firstThursday.getDay() + 6) % 7 + 3);

    // Check if daylight-saving-time-switch occured and correct for it
    var ds = targetThursday.getTimezoneOffset() - firstThursday.getTimezoneOffset();
    targetThursday.setHours(targetThursday.getHours() - ds);

    // Number of weeks between target Thursday and first Thursday
    var weekDiff = (targetThursday - firstThursday) / (86400000 * 7);
    return 1 + Math.floor(weekDiff);
  }

  /**
   * Get ISO-8601 numeric representation of the day of the week
   * 1 (for Monday) through 7 (for Sunday)
   * 
   * @param  {Object} `date`
   * @return {Number}
   */
  function getDayOfWeek(date) {
    var dow = date.getDay();
    if (dow === 0) {
      dow = 7;
    }
    return dow;
  }

  /**
   * kind-of shortcut
   * @param  {*} val
   * @return {String}
   */
  function kindOf(val) {
    if (val === null) {
      return 'null';
    }

    if (val === undefined) {
      return 'undefined';
    }

    if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) !== 'object') {
      return typeof val === 'undefined' ? 'undefined' : _typeof(val);
    }

    if (Array.isArray(val)) {
      return 'array';
    }

    return {}.toString.call(val).slice(8, -1).toLowerCase();
  };

  if (typeof define === 'function' && define.amd) {
    define(function () {
      return dateFormat;
    });
  } else if ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object') {
    module.exports = dateFormat;
  } else {
    global.dateFormat = dateFormat;
  }
})(undefined);